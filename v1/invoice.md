## Счета
invoice.js

[Главная](README.md)  /  [Система управления производством](production.md)

### Получение списка счетов

Для получения списка счетов необходимо отправить **`GET`** запрос на **`/invoice/:c_id/:number/:order`**<br>

Пример ответа:<br>
```
[
    {
        "_id": "5fb6e1623aec84165cd94031",
        "c_id": "5dc73a298ce0ed3ec726f0d3",
        "number": 456009,
        "date": "2009-12-11T23:00:00.000Z",
        "status": true,
        "price": 18791.48
    },
    {
        "_id": "5fb7b7a6dc90801a6484e1b4",
        "c_id": "5dc73a298ce0ed3ec726f0d3",
        "number": 456010,
        "date": "2009-12-11T23:00:00.000Z",
        "status": false,
        "price": 3900.75
    },
    {
        "_id": "5fb828d3e6caec60d4434e38",
        "c_id": "5dc73a298ce0ed3ec726f0d3",
        "number": 456010,
        "date": null,
        "status": false,
        "price": 8000.879999999999
    }
]
```

Параметры:<br>
**c_id*** - Идентификатор клиента или "null"<br>
**number*** - Номер счёта или "null"<br>
**order*** - Идентификатор заказа или "null"<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Получение заказов клиента для которых не выставлен счёт

Для получения заказов клиента для которых не выставлен счёт необходимо отправить **`GET`** запрос на **`/invoice_orders/:c_id`**<br>

Пример ответа:<br>
```
[
    {
        "order_pending": [
            {
                "_id": "5f4611ae46a1250567e99685",
                "name": "Geely Emgrand EC7 2009-2016"
            },
            {
                "_id": "5fab0010f15ef95b805e7816",
                "name": "Audi 80 1991-1996"
            }
        ],
        "order": [
            {
                "_id": "5f92ab2c82d43918ea4298b2",
                "name": "Audi 100 2020-н.в."
            }
        ],
        "order_complete": [
            {
                "_id": "5e431a83a7b3400f09f2c79c",
                "name": "Chery Amulet 2003-2012"
            },
            {
                "_id": "5e451aced9f34f1fe16003be",
                "name": "Chevrolet Aveo 2011-н.в."
            }
        ]
    }
]
```

Параметры:<br>
**c_id*** - Идентификатор клиента или "null"<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Содание нового cчёта

Для создания нового счёта необходимо отправить **`POST`** запрос на **`/invoice`**<br>

Пример отправки параметров:<br>
```
{
    "orders": 
    [
      "5f4611ae46a1250567e99685",
      "5fab0010f15ef95b805e7816"
    ],
    "c_id": "5dc73a298ce0ed3ec726f0d3",
    "number": 456010,
    "status": false
}
```

Параметры:<br>
**orders*** - Массив из идентификаторов<br>
**c_id*** - Идентификатор клиента<br>
**number*** - Номер счёта<br>
**status*** - Статус заказа<br>

Ответ:<br> коды состояний 204 или 404.

<br>


###  Изменение статуса счёта

Для изменения статуса счёта необходимо отправить **`PUT`** запрос на **`/m_invoice`**<br>

Пример отправки параметров:<br>
```
{
    "_id": "5fb6e1623aec84165cd94031",
    "status": true
}
```

Параметры:<br>
**_id*** - Идентификатор счёта<br>
**status*** - Статус счёта. true - оплачен  false - отправлен<br>

Ответ:<br> коды состояний 204 или 404.

<br>