## Справочники
deskbook.js

[Главная](README.md)  /  [Система управления производством](production.md)


### Получение списка справочников

Для получения списка справочников необходимо отправить **`GET`** запрос на **`/api/deskbook/:g_id`**<br>

Пример ответа:<br>
```
[
    {
        "_id": "5cfd7f6af142a74ad523ae8a",
        "name": "Цвет отстрочки"
    },
    {
        "_id": "5cfd7fb7f142a74ad523ae8b",
        "name": "Отстрочка"
    }
]
```

Параметры:<br>
**g_id*** - Идентификатор группы<br>

<br>

### Создание справочника

Для создания нового справочника необходимо отправить **`POST`** запрос на **`/api/deskbook`**<br>

Пример отправки параметров:<br>
```
{
    "name": "Тест",
    "dg_id": "5d41368692d16b40f47dbcdb"
}
```

Параметры:<br>
**name*** - Имя нового справочника<br>
**dg_id*** - Идентификатор группы нового справочника<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Редактирование названия справочника

Для редактирования названия справочника необходимо отправить **`PUT`** запрос на **`/api/deskbook`**<br>

Пример отправки параметров:<br>
```
{
    "_id": "5d41497235610d3160da5e63",
    "name": "Тест"
}
```

Параметры:<br>
**id*** - Идентификатор справочника<br>
**name*** - Новое название справочника<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Удаление справочника

Для удаления справочника необходимо отправить **`DELETE`** запрос на **`/api/deskbook/:id`**<br>

Параметры:<br>
**id*** - Идентификатор справочника<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Получение списка значений справочника

Для получения списка значений справочника необходимо отправить **`GET`** запрос на **`/api/deskbook_sections/:_id`**<br>

Пример ответа:<br>
```
[
    {
        "v_id": "5d99fcc5fff5161662dfda33",
        "name": "Main page"
    },
    {
        "v_id": "5d99fcdbfff5161662dfda34",
        "name": "Industry 4.0"
    }
]
```

Параметры:<br>
**_id*** - Идентификатор справочника<br>

<br>

### Получение значений справочника

Для получения значений справочника необходимо отправить **`GET`** запрос на **`/api/deskbook_value/:id/:value`**<br>

Пример ответа:<br>
```
[
    {
        "v_id": "5cfd7b960d50b14ad518dcb1",
        "name": "Classic"
    },
    {
        "v_id": "5cfd7bdf0d50b14ad518dcb2",
        "name": "Classic plus"
    }
]
```

```
[
    {
        "v_id": "5d89208db08dd438247ade4d",
        "name": "5 мест",
        "argument": {
            "price": 5500
        }
    },
    {
        "v_id": "5d892096b08dd438247ade4e",
        "name": "2 места",
        "argument": {
            "price": 2500
        }
    },
]
```

Параметры:<br>
**id*** - Идентификатор справочника<br>
**value*** - Для поиска используем имя значения справочника (name) или идентификатор значения справочника (v_id) , если поиск не используется отправляем 'null'<br>

<br>

### Создание значения справочника

Для создания нового значения справочника необходимо отправить **`POST`** запрос на **`/api/deskbook_value`**<br>

Пример отправки параметров:<br>
```
{
    "_id": "5d414d85c58221090cd208ff",
    "name": "Тест"
    "argument":
    {
      "price": 900
    }
}
```

Параметры:<br>
**_id*** - Идентификатор материала<br>
**name*** - Имя значения справочника<br>
**argument*** - Аргументы справочника, представляют собой объект с любыми полями ключ-значение<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Изменение значения справочника

Для редактирования значения справочника необходимо отправить **`PUT`** запрос на **`/api/deskbook_value`**<br>

Пример отправки параметров:<br>
```
{
    "_id": "5d414d85c58221090cd208ff",
    "v_id": "5d415a91747f1b46d0edb1d9",
    "name": "Тест",
    "argument":
    {
      "price": 5500
    }
}
```

Параметры:<br>
**_id*** - Идентификатор справочника<br>
**v_id*** - Идентификатор значения справочника<br>
**name*** - Новое имя значения справочника<br>
**argument*** - Аргументы справочника, представляют собой объект с любыми полями ключ-значение<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Удаление значения справочника

Для удаления значения справочника необходимо отправить **`DELETE`** запрос на **`/api/deskbook_value/:id/:v_id`**<br>

Параметры:<br>
**id*** - Идентификатор справочника<br>
**v_id*** - Идентификатор значения справочника<br>

Ответ:<br> коды состояний 204 или 404.

<br>

### Загрузка файла

Для загрузки файла необходимо отправить **`POST`** запрос на **`/api/file_load`**<br>

Параметры передаются как form-data:<br>
**folder*** - папка в которую будем загружать файл<br>
**file*** - загружаемый файл<br>

Ответ:<br> коды состояний 204 или 404.